package controller;

import java.util.List;

import factory.TeamOfDroids;
import javafx.collections.FXCollections;
import javafx.collections.ListChangeListener;
import javafx.collections.ObservableList;
import model.Droid;

public class BattleArena {
	ObservableList<Droid> groupOne;
	ObservableList<Droid> groupTwo;

	public BattleArena(List<Droid> firstTeam, List<Droid> secondTeam){
		initializeTeams(firstTeam, secondTeam);
	}

	public static void main(String[] args) {
		TeamOfDroids teams = new TeamOfDroids();
		BattleArena arena = new BattleArena(teams.getFirstTeam(), teams.getSecondTeam());
		while(true){
			for (int i = 0; i < arena.groupOne.size(); i++) {
				arena.groupOne.get(i).performance(arena.groupTwo);
			}
			for (int j = 0; j < arena.groupTwo.size(); j++) {
				arena.groupTwo.get(j).performance(arena.groupOne);
			}
		}
		//			arena.groupOne.get(0).performance(arena.groupTwo);
		//			arena.groupTwo.get(0).performance(arena.groupOne);
	}


private void initializeTeams(List<Droid> firstTeam, List<Droid> secondTeam) {
	groupOne = FXCollections.observableList(firstTeam);
	groupOne.addListener((ListChangeListener<Droid>) change -> {
		System.out.println("Something changed in First team. ");
		if(groupOne.size() == 0){
			System.out.println("First team lost. ");
			System.exit(1);
		}
	});

	groupTwo = FXCollections.observableList(secondTeam);
	groupTwo.addListener((ListChangeListener<Droid>) change -> {
		System.out.println("Something changed in Second team. ");
		if(groupTwo.size() == 0){
			System.out.println("Second team lost. ");
			System.exit(1);
		}
	});
}
}
